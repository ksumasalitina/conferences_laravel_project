"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[521],{9521:(t,e,n)=>{n.r(e),n.d(e,{default:()=>u});var r=n(629),i=n(9819),o=n(7728);function a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(Object(n),!0).forEach((function(e){c(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function c(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const m={name:"ShowComments",data:function(){return{user:o.Z.user().id,is_admin:"admin"===o.Z.user().role[0].name,dialog:!1,newComment:{user_id:0,lecture_id:this.$route.params.id,comment:""},editField:!1,extensions:[i.Ay,i.V6,i.rU,i.v6,i.Re,i.Tx,i.HC,i.DY,i.GS,[i.X6,{options:{levels:[1,2,3]}}],i.d8,i.EK,i.bo,i.nv,i.U1]}},components:{ExportLoading:n(182).Z,TiptapVuetify:i.CL},computed:(0,r.rn)({comments:function(t){return t.comment.comments},quantity:function(t){return t.comment.quantity},loading:function(t){return t.comment.loading},limit:function(t){return t.comment.limit},busy:function(t){return t.comment.busy}}),mounted:function(){},methods:s(s({},(0,r.nv)("comment",["getComments","addComment","updateComment","exportComments"])),{},{loadMore:function(){this.getComments(this.$route.params.id)},update:function(t){this.updateComment(t)}})};const u=(0,n(1900).Z)(m,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"mt-3"},[e("v-dialog",{attrs:{width:"500"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[e("export-loading")],1),t._v(" "),e("v-layout",{attrs:{"justify-center":""}},[e("v-card",{attrs:{width:"50%"}},[e("v-card-title",{staticClass:"text-h4"},[t._v("Comments "+t._s(t.quantity))]),e("hr",{staticClass:"marg-auto",attrs:{width:"90%"}}),t._v(" "),e("v-card-subtitle",{directives:[{name:"show",rawName:"v-show",value:t.is_admin,expression:"is_admin"}]},[e("v-btn",{attrs:{color:"blue",text:""},on:{click:function(e){t.exportComments(t.$route.params.id),t.dialog=!0}}},[t._v("Export comments")])],1),t._v(" "),e("v-card-text",[e("v-form",{on:{submit:function(e){return e.preventDefault(),t.addComment(t.newComment)}}},[e("tiptap-vuetify",{staticClass:"mb-2",attrs:{extensions:t.extensions},model:{value:t.newComment.comment,callback:function(e){t.$set(t.newComment,"comment",e)},expression:"newComment.comment"}}),t._v(" "),e("v-btn",{attrs:{color:"secondary",type:"submit"}},[t._v("Send")])],1)],1),t._v(" "),e("v-card-text",{staticClass:"text--primary"},[e("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.loadMore,expression:"loadMore"}],attrs:{"infinite-scroll-disabled":"busy","infinite-scroll-distance":"limit"}},[t._l(t.comments,(function(n){return e("v-card",{key:n.id,staticClass:"mb-2"},[e("v-card-title",{staticClass:"text-h6"},[t._v(t._s(n.firstname)+" "+t._s(n.lastname))]),t._v(" "),e("v-card-subtitle",[t._v(t._s(new Date(n.created_at).toLocaleDateString("en-us",{weekday:"long",year:"numeric",month:"short",day:"numeric"})))]),t._v(" "),e("v-card-text",{staticClass:"text--primary",domProps:{innerHTML:t._s(n.comment)}}),t._v(" "),n.user_id===t.user&&Math.round((new Date-new Date(n.created_at))%864e5%36e5/6e4)<10?e("v-card-actions",[e("v-btn",{attrs:{text:"",align:"right"},on:{click:function(e){t.editField=!t.editField}}},[t._v("Edit")]),t._v(" "),t.editField?e("v-card-text",[e("v-form",{on:{submit:function(e){return e.preventDefault(),t.updateComment(n)}}},[e("tiptap-vuetify",{staticClass:"mb-2",attrs:{extensions:t.extensions},model:{value:n.comment,callback:function(e){t.$set(n,"comment",e)},expression:"comment.comment"}}),t._v(" "),e("v-btn",{attrs:{text:"",type:"submit"}},[t._v("Save")])],1)],1):t._e()],1):t._e()],1)})),t._v(" "),t.loading?e("v-progress-circular",{attrs:{indeterminate:"",color:"primary"}}):t._e()],2)])],1)],1)],1)}),[],!1,null,"f58ca39e",null).exports}}]);